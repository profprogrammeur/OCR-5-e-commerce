<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" type="image/png" href="favicon-16x16.png">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>VUE</title>
  </head>
  <body>
    <div class="container">

    <h1 id="para" class="text-center">VUE</h1>
    <div class="list-group" id="listGroup">
      <!-- <a href="#" class="list-group-item list-group-item-action active">
        Cras justo odio
      </a> -->
      <!-- <a href="#" class="list-group-item list-group-item-action">Dapibus ac facilisis in</a>
      <a href="#" class="list-group-item list-group-item-action">Morbi leo risus</a>
      <a href="#" class="list-group-item list-group-item-action">Porta ac consectetur ac</a>
      <a href="#" class="list-group-item list-group-item-action disabled" tabindex="-1" aria-disabled="true">Vestibulum at
        eros</a> -->
    </div>
    <form id="form" method="post">
      <ul id="ul">
        <!-- <ul id="ul2"></ul> -->
      </ul>
      <input type="submit" value="Submit" />
    </form>
    <img id="pics" />
    </div>
  </body>
  <script>
    var response = "";
    var request = new XMLHttpRequest();
    const pics = document.getElementById("pics");
    request.onreadystatechange = function() {
      if (this.readyState == XMLHttpRequest.DONE && this.status == 200) {
        response = JSON.parse(this.responseText);
        // console.log("lenses : " + response[1].lenses);
        console.log(response);
        // response[0].name;
        response.forEach(item => createListElement(item.name));
        response.forEach(item => createListElement2(item.name));
        // pics.src = response.imageUrl;
        // pics.style.height="100px"
      }
    };
    // request.open("GET", "http://localhost:3000/api/cameras/5be1ed3f1c9d44000030b061");

    request.open("GET", "http://localhost:3000/api/cameras/");

    request.send();
    const para = document.getElementById("para");
    const ul = document.getElementById("ul");
    const form = document.getElementById("form");

    // para.textContent = response[0];

    //https://codepen.io/JohnPaulFich/pen/MXmzzM
    function createListElement(el) {
      var li = document.createElement("li"); // creates an element "li"
      li.appendChild(document.createTextNode(el)); //makes text from input field the li text
      ul.appendChild(li); //adds li to ul
      // input.value = ""; //Reset text input field
      li.onclick = function() {
          //index of product in list
        const numero = Array.from(li.parentNode.children).indexOf(li);
        console.log(Array.from(li.parentNode.children).indexOf(li));
        const _id=response[numero]._id;
        const queryStr = "_id=" + _id;
        console.log(queryStr);
        location.href = "product.html" + "?" + queryStr;
                // form.submit();

      };
    }


    document.getElementById("listGroup");  
    function createListElement2(el) {
    var a = document.createElement("a"); // creates an element "li"
    a.classList.add("list-group-item" ,"list-group-item-action")
    a.appendChild(document.createTextNode(el)); //makes text from input field the li text
    listGroup.appendChild(a); //adds li to ul
    a.onclick = function () {
      const numero = Array.from(a.parentNode.children).indexOf(a);
      console.log(Array.from(a.parentNode.children).indexOf(a));
      const _id = response[numero]._id;
      const queryStr = "_id=" + _id;
      // console.log(queryStr);
      location.href = "product.html" + "?" + queryStr;
      console.log(response);
    };
  }


    // li.addEventListener("click", select);
    //     function select() {
    //         // li.classList.toggle("done");
    //     }
  </script>
</html>
